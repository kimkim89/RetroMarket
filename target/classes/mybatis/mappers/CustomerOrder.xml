<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.CustomerOrder">


	<!-- 상품 주문 페이지의 결제수단 - 은행명 출력에 사용 -->
	<select id="selectBankName" resultType="BankNameDTO">
		select * from bank_name_info;
	</select>
	
	<!-- 장바구니 내 전체 상품 목록 조회 -->
	<select id="selectAllOrderList" parameterType="String" resultType="cartVO">
		select * from cart where member_id = #{userId};
	</select>
	
		
	<!-- 장바구니 테이블로부터 선택한 상품 목록 조회 -->
	<select id="selectSomeOrderList" parameterType="int" resultType="cartVO">
		select * from cart where cart_idx = #{cartIndex} order by cart_idx desc;
	</select>


	<!-- 결제버튼 클릭 시 주문 관련 정보 저장 -->
	<insert id="insertOrderInfo" parameterType="csOrderVO">
		insert into product_order ( order_idx,
									order_code,
									member_id,
									order_name,
									order_email,
									order_addr1,
									order_addr2,
									order_addr3,
									order_phone,
									receiver_name,
									receiver_phone,
									receiver_addr1,
									receiver_addr2,
									receiver_addr3,
									delivery_check,
									delivery_fee,
									delivery_choice,
									delivery_msg,
									coupon_price,
									added_point,
									used_point,
									payment_method,
									payment_status,
									od_bank_code,
									bank_acct_num,
									bank_acct_owner,
									total_order_price
								   )
			 			   values ( #{order_idx},
									#{order_code},
									#{member_id},
									#{order_name},
									#{order_email},
									#{order_addr1},
									#{order_addr2},
									#{order_addr3},
									#{order_phone},
									#{receiver_name},
									#{receiver_phone},
									#{receiver_addr1},
									#{receiver_addr2},
									#{receiver_addr3},
									#{delivery_check},
									#{delivery_fee},
									#{delivery_choice},
									#{delivery_msg},
									#{coupon_price},
									#{added_point},
									#{used_point},
									#{payment_method},
									0,
									#{od_bank_code},
									#{bank_acct_num},
									#{bank_acct_owner},
									#{total_order_price}
			 					);
	</insert>
	
	<!-- 전체 주문 조회 -->
	<select id="selectLastOrder" resultType="csOrderVO">
		select * from product_order where order_date = #{} order by order_idx desc limit 1;
	</select>





<!-- 은행 정보 입력용으로만 사용한 후 주석 처리 했음  -->
<!-- 	<insert id="insertBankInfo" parameterType="hashMap"> -->
<!-- 		insert into bank_name_info(bank_code, bank_name) values(#{bankCode}, #{bankName}); -->
<!-- 	</insert> -->

</mapper>