<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.Cart">

<resultMap type="CartVO" id="CartVO">
	<collection property="ProductVO" resultMap="ProductVO"></collection>
</resultMap>

	<insert id="insertCartInfo" parameterType="cartVO">
		insert into cart( cart_idx, 
						  order_num, 
						  member_id, 
						  pr_idx, 
						  pr_code, 
						  pr_name, 
						  pr_price, 
						  pr_discount_price, 
						  pr_point,						 
						  cart_status, 
						  member_ip, 
						  total_num )		
				values(	#{cart_idx}, 
						#{order_num}, 
						#{member_id}, 
						#{pr_idx}, 
						#{pr_code}, 
						#{pr_name}, 
						#{pr_price}, 
						#{pr_discount_price}, 	
						#{pr_point}, 					
						#{cart_status}, 						
						#{member_ip},
						#{total_num}
						);		
	</insert>
	
	<select id="selectCartList" parameterType="String" resultType="map">
		select * from cart c inner join product_info p on c.pr_idx = p.mk_idx where c.member_id = #{member_id} order by c.cart_idx desc;
	</select>

</mapper>